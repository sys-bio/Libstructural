<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Structural Analysis Library: UnitDefinition Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Structural Analysis Library
   &#160;<span id="projectnumber">1.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">UnitDefinition Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;UnitDefinition.h&gt;</code></p>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>{core} A definition of a unit used in an SBML model.</p>
<p>Units of measurement may be supplied in a number of contexts in an SBML model. The SBML unit definition facility uses two classes of objects, <a class="el" href="class_unit_definition.html">UnitDefinition</a> and <a class="el" href="class_unit.html">Unit</a>. The approach to defining units in SBML is compositional; for example, <em>meter second<sup> &ndash;2</sup></em> is constructed by combining a <a class="el" href="class_unit.html">Unit</a> object representing <em>meter</em> with another <a class="el" href="class_unit.html">Unit</a> object representing <em>second<sup> &ndash;2</sup></em>. The combination is wrapped inside a <a class="el" href="class_unit_definition.html">UnitDefinition</a>, which provides for assigning an identifier and optional name to the combination. The identifier can then be referenced from elsewhere in a model. Thus, the <a class="el" href="class_unit_definition.html">UnitDefinition</a> class is the container, and <a class="el" href="class_unit.html">Unit</a> instances are placed inside <a class="el" href="class_unit_definition.html">UnitDefinition</a> instances.</p>
<p>Two points are worth discussing in the context of SBML units. First, unit declarations in SBML models are <em>optional</em>. The consequence of this is that a model must be numerically self-consistent independently of unit declarations, for the benefit of software tools that cannot interpret or manipulate units. <a class="el" href="class_unit.html">Unit</a> declarations in SBML are thus more akin to a type of annotation; they can indicate intentions, and can be used by model readers for checking the consistency of the model, labeling simulation output, etc., but any transformations of values implied by different units must be incorporated <em>explicitly</em> into a model.</p>
<p>Second, the vast majority of situations that require new SBML unit definitions involve simple multiplicative combinations of base units and factors. An example is <em>moles per litre per second</em>. What distinguishes these sorts of unit definitions from more complex ones is that they may be expressed without the use of an additive offset from a zero point. The use of offsets complicates all unit definition systems, yet in the domain of SBML, the real-life cases requiring offsets are few (and in fact, to the best of our knowledge, only involve temperature). Consequently, the SBML unit system has been consciously designed to simplify implementation of unit support for the most common cases in systems biology. The cost of this simplification is to require units with offsets to be handled explicitly by the modeler.</p>
<h1><a class="anchor" id="unitdef-summary"></a>
Summary of the UnitDefinition construct</h1>
<p><a class="el" href="class_unit_definition.html">UnitDefinition</a> has two attributes and one subelement. The two attributes are "id" and "name", and the subelement is <a class="el" href="class_list_of_units.html">ListOfUnits</a>.</p>
<p>The required attribute "id" and optional attribute "name" are both strings. The "id" attribute is used to give the defined unit a unique identifier by which other parts of an SBML model definition can refer to it. The "name" attribute is intended to be used for giving the unit definition an optional human-readable name. Please see the <a href="#unitdef-id">next section</a> for information about the values permitted for "id".</p>
<p>A <a class="el" href="class_unit_definition.html">UnitDefinition</a> may contain exactly one <a class="el" href="class_list_of_units.html">ListOfUnits</a>, and this list may contain one or more <a class="el" href="class_unit.html">Unit</a> definitions; see the definitions of these other object classes for more information about them. In SBML Level&#160;2 and SBML Level&#160;3 Version&#160;1, if the <a class="el" href="class_list_of_units.html">ListOfUnits</a> was present, it must have one or more <a class="el" href="class_unit.html">Unit</a> definitions. In SBML Level&#160;3 Version&#160;2, this restriction was relaxed, and a <a class="el" href="class_list_of_units.html">ListOfUnits</a> was allowed to be empty. In either case, if a <a class="el" href="class_unit_definition.html">UnitDefinition</a> had no child <a class="el" href="class_unit.html">Unit</a> elements, the unit was considered to be undefined.</p>
<p>The following example illustrates a complete unit definition (when written in XML) when all the pieces are combined together. This defines "mmls" to be millimoles per litre per second. </p><pre class="fragment">&lt;listOfUnitDefinitions&gt;
    &lt;unitDefinition id="mmls"&gt;
        &lt;listOfUnits&gt;
            &lt;unit kind="mole"   scale="-3"/&gt;
            &lt;unit kind="litre"  exponent="-1"/&gt;
            &lt;unit kind="second" exponent="-1"/&gt;
        &lt;/listOfUnits&gt;
    &lt;/unitDefinition&gt;
&lt;/listOfUnitDefinitions&gt;
</pre><h1><a class="anchor" id="unitdef-id"></a>
Special considerations for Unit object identifiers</h1>
<p>The attribute "id" in <a class="el" href="class_unit_definition.html">UnitDefinition</a> cannot be given simply any value, and the precise details of the values permitted differ slightly between Levels of SBML: </p><ul>
<li>
<p class="startli">The "id" of a <a class="el" href="class_unit_definition.html">UnitDefinition</a> must <em>not</em> contain a value from the list of SBML's predefined base unit names (i.e., the strings <code>gram</code>, <code>litre</code>, etc.). In SBML Level&#160;3, this list consists of the following:</p>
<dl class="section user"><dt></dt><dd><table border="0" class="centered text-table width80 normal-font code" style="border: none !important">
<tr>
<td>ampere</td><td>farad</td><td>joule</td><td>lux</td><td>radian</td><td>volt  </td></tr>
<tr>
<td>avogadro</td><td>gram</td><td>katal</td><td>metre</td><td>second</td><td>watt  </td></tr>
<tr>
<td>becquerel</td><td>gray</td><td>kelvin</td><td>mole</td><td>siemens</td><td>weber  </td></tr>
<tr>
<td>candela</td><td>henry</td><td>kilogram</td><td>newton</td><td>sievert  </td></tr>
<tr>
<td>coulomb</td><td>hertz</td><td>litre</td><td>ohm</td><td>steradian  </td></tr>
<tr>
<td>dimensionless</td><td>item</td><td>lumen</td><td>pascal</td><td>tesla  </td></tr>
</table>
</dd></dl>
<p>This list of predefined base units is nearly identical in SBML Level&#160;2 Version&#160;4, the exception being that Level&#160;2 does not define <code>avogadro</code>. SBML Level&#160;2 Version&#160;1 (and <em>only</em> this Level+Version combination) provides an additional predefined unit name, <code>Celsius</code>, not available in Level&#160;3. Finally, SBML Level&#160;1 Versions&#160;2&ndash;3 provide two more additional predefined unit names, <code>meter</code> and <code>liter</code>. This is explained in somewhat greater detail in the description of the <a class="el" href="class_unit.html">Unit</a> class.</p>
<ul>
<li>
In SBML Level&#160;2 (all Versions), there is an additional set of reserved identifiers: <code>substance</code>, <code>volume</code>, <code>area</code>, <code>length</code>, and <code>time</code>. Using one of these values for the attribute "id" of a <a class="el" href="class_unit_definition.html">UnitDefinition</a> has the effect of redefining the model-wide default units for the corresponding quantities. The list of special unit names in SBML Level&#160;2 is given in the table below: </li>
</ul>
<p>Also, SBML Level&#160;2 imposes two limitations on redefining the predefined unit <code>substance</code>, <code>volume</code>, <code>area</code>, <code>length</code>, and <code>time:</code> (1) The <a class="el" href="class_unit_definition.html">UnitDefinition</a> of a predefined SBML unit can only contain a single <a class="el" href="class_unit.html">Unit</a> object within it. (2) The value of the "kind" attribute in a <a class="el" href="class_unit.html">Unit</a> instance must be drawn from one of the values in the second column of the table above.</p>
<p>The special unit names <code>substance</code>, <code>volume</code>, <code>area</code>, <code>length</code>, and <code>time</code> are not defined by SBML Level&#160;3, which uses a different approach to setting model-wide inherited units.</p>
<p class="endli"></p>
</li>
</ul>
<h1><a class="anchor" id="sbml-units-limits"></a>
Further comments about SBML's unit definition system</h1>
<p>The vast majority of modeling situations requiring new SBML unit definitions involve simple multiplicative combinations of base units and factors. An example of this might be <em>moles per litre per second</em>. What distinguishes these sorts of simpler unit definitions from more complex ones is that they may be expressed without the use of an additive offset from a zero point. The use of offsets complicates all unit definition systems, yet in the domain of SBML the real-life cases requiring offsets are few (and in fact, to the best of our knowledge, only involve temperature). Consequently, the SBML unit system has been consciously designed in a way that attempts to simplify implementation of unit support for the most common cases in systems biology.</p>
<p>As of SBML Level&#160;2 Version&#160;2, <a class="el" href="class_unit.html">Unit</a> no longer has the attribute called "offset" introduced in SBML Level&#160;2 Version&#160;1. It turned out that the general case involving units with offsets was incorrectly defined, and few (if any) developers even attempted to support offset-based units in their software. In the development of Level&#160;2 Version&#160;2, a consensus among SBML developers emerged that a fully generalized unit scheme is <em>so</em> confusing and complicated that it actually <em>impedes</em> interoperability. SBML Level&#160;2 Version&#160;2, Version&#160;3 and Version&#160;4 acknowledge this reality by reducing and simplifying the unit system, specifically by removing the "offset" attribute on <a class="el" href="class_unit.html">Unit</a> and <code>Celsius</code> as a pre-defined unit.</p>
<p>The following guidelines suggest methods for handling units that do require the use of zero offsets for their definitions: </p><ul>
<li>
<p class="startli"><em>Handling Celsius</em>. A model in which certain quantities are temperatures measured in degrees Celsius can be converted straightforwardly to a model in which those temperatures are in kelvin. A software tool could do this by performing a straightforward substitution using the following relationship: <em>T<sub> kelvin</sub> = T<sub>Celsius</sub> + 273.15</em>. In every mathematical formula of the model where a quantity (call it <em>x</em>) in degrees Celsius appears, replace <em>x</em> with <em>x<sub>k</sub>+ 273.15</em>, where <em>x<sub>k</sub></em> is now in kelvin. An alternative approach would be to use a <a class="el" href="class_function_definition.html">FunctionDefinition</a> object to define a function encapsulating this relationship above and then using that in the rest of the model as needed. Since Celsius is a commonly-used unit, software tools could help users by providing users with the ability to express temperatures in Celsius in the tools' interfaces, and making substitutions automatically when writing out the SBML.</p>
<p class="endli"></p>
</li>
<li>
<p class="startli"><em>Other units requiring offsets</em>. One approach to handling other kinds of units is to use a <a class="el" href="class_function_definition.html">FunctionDefinition</a> to define a function encapsulating the necessary mathematical relationship, then substituting a call to this function wherever the original quantity appeared in the model. For example, here is a possible definition for converting Fahrenheit to Celsius degrees: </p><pre class="fragment">&lt;functionDefinition id="Fahrenheit_to_kelvin"&gt;
    &lt;math xmlns="http://www.w3.org/1998/Math/MathML"&gt;
        &lt;lambda&gt;
            &lt;bvar&gt;&lt;ci&gt; temp_in_fahrenheit &lt;/ci&gt;&lt;/bvar&gt;
            &lt;apply&gt;
                &lt;divide/&gt;
                &lt;apply&gt;
                    &lt;plus/&gt;
                    &lt;ci&gt; temp_in_fahrenheit &lt;/ci&gt;
                    &lt;cn&gt; 459.67 &lt;/cn&gt;
                &lt;/apply&gt;
                &lt;cn&gt; 1.8 &lt;/cn&gt;
            &lt;/apply&gt;
        &lt;/lambda&gt;
    &lt;/math&gt;
&lt;/functionDefinition&gt;
</pre><p class="endli"></p>
</li>
<li>
<p class="startli">An alternative approach not requiring the use of function definitions is to use an <a class="el" href="class_assignment_rule.html">AssignmentRule</a> for each variable in Fahrenheit units. The <a class="el" href="class_assignment_rule.html">AssignmentRule</a> could compute the conversion from Fahrenheit to (say) kelvin, assign its value to a variable (in Kelvin units), and then that variable could be used elsewhere in the model.</p>
<p class="endli"></p>
</li>
<li>
Still another approach is to rewrite the mathematical formulas of a model to directly incorporate the conversion formula wherever the original quantity appeared. </li>
</ul>
<p>Please consult the SBML specifications for more information about this and other issues involving units. </p>
</div><hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="_unit_definition_8h.html">UnitDefinition.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
