\hypertarget{classgzfilebuf}{}\section{gzfilebuf Class Reference}
\label{classgzfilebuf}\index{gzfilebuf@{gzfilebuf}}


Gzipped file stream buffer class.  




{\ttfamily \#include $<$zfstream.\+h$>$}



Inherits streambuf.

\subsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classgzfilebuf}{gzfilebuf} $\ast$ \hyperlink{classgzfilebuf_a72889233c00bfd297ca01723cc4ed8fc}{attach} (\hyperlink{lp__lib_8h_adeb9ec6400320e4923ac9d836d509ddb}{int} fd, std\+::ios\+\_\+base\+::openmode \hyperlink{ioapi_8h_ab77191763734fbb3e515371393ccb606}{mode})
\begin{DoxyCompactList}\small\item\em Attach to already open gzipped file. \end{DoxyCompactList}\item 
\hyperlink{classgzfilebuf}{gzfilebuf} $\ast$ \hyperlink{classgzfilebuf_a280d1c661fb371c22de1214d5a1682a2}{close} ()
\begin{DoxyCompactList}\small\item\em Close gzipped file. \end{DoxyCompactList}\item 
\hyperlink{classgzfilebuf_aa08da094521bfa645427c0ae4c851504}{gzfilebuf} ()
\item 
bool \hyperlink{classgzfilebuf_a24dfb3e35c147aaf3a562c1ea4268757}{is\+\_\+open} () const
\begin{DoxyCompactList}\small\item\em Check if file is open. \end{DoxyCompactList}\item 
\hyperlink{classgzfilebuf}{gzfilebuf} $\ast$ \hyperlink{classgzfilebuf_a78281ba60675bf8727e92ed23b4a2cc9}{open} (const char $\ast$\hyperlink{lp__lib_8h_a2946c588fc7fa2fa5b43ac54b7872725}{name}, std\+::ios\+\_\+base\+::openmode \hyperlink{ioapi_8h_ab77191763734fbb3e515371393ccb606}{mode})
\begin{DoxyCompactList}\small\item\em Open gzipped file. \end{DoxyCompactList}\item 
\hyperlink{lp__lib_8h_adeb9ec6400320e4923ac9d836d509ddb}{int} \hyperlink{classgzfilebuf_ad109ea4fc4ca7cc19d8014b53375255d}{setcompression} (\hyperlink{lp__lib_8h_adeb9ec6400320e4923ac9d836d509ddb}{int} comp\+\_\+level, \hyperlink{lp__lib_8h_adeb9ec6400320e4923ac9d836d509ddb}{int} comp\+\_\+strategy=Z\+\_\+\+D\+E\+F\+A\+U\+L\+T\+\_\+\+S\+T\+R\+A\+T\+E\+GY)
\begin{DoxyCompactList}\small\item\em Set compression level and strategy on the fly. \end{DoxyCompactList}\item 
virtual \hyperlink{classgzfilebuf_acb95da35cfe68e16fc85cac62453451d}{$\sim$gzfilebuf} ()
\end{DoxyCompactItemize}
\subsection*{Protected Member Functions}
\begin{DoxyCompactItemize}
\item 
bool \hyperlink{classgzfilebuf_ab0c2c304183e591706681af26add3da2}{open\+\_\+mode} (std\+::ios\+\_\+base\+::openmode \hyperlink{ioapi_8h_ab77191763734fbb3e515371393ccb606}{mode}, char $\ast$c\+\_\+mode) const
\begin{DoxyCompactList}\small\item\em Convert ios open mode int to mode string used by zlib. \end{DoxyCompactList}\item 
virtual int\+\_\+type \hyperlink{classgzfilebuf_aa5c16941b7897bba35349199cbbac2ed}{overflow} (int\+\_\+type c=std\+::streambuf\+::traits\+\_\+type\+::eof())
\begin{DoxyCompactList}\small\item\em Write put area to gzipped file. \end{DoxyCompactList}\item 
virtual std\+::streambuf $\ast$ \hyperlink{classgzfilebuf_a11ff58ab8f4de52cf496892b3a97827e}{setbuf} (char\+\_\+type $\ast$p, std\+::streamsize n)
\begin{DoxyCompactList}\small\item\em Installs external stream buffer. \end{DoxyCompactList}\item 
virtual std\+::streamsize \hyperlink{classgzfilebuf_aa6c80a4f96fdc5e4a991113699428164}{showmanyc} ()
\begin{DoxyCompactList}\small\item\em Number of characters available in stream buffer. \end{DoxyCompactList}\item 
virtual \hyperlink{lp__lib_8h_adeb9ec6400320e4923ac9d836d509ddb}{int} \hyperlink{classgzfilebuf_a8fdf6b079487c0034cb920c63c9eaf55}{sync} ()
\begin{DoxyCompactList}\small\item\em Flush stream buffer to file. \end{DoxyCompactList}\item 
virtual int\+\_\+type \hyperlink{classgzfilebuf_a23768f9935022e54608c53173f0047c0}{underflow} ()
\begin{DoxyCompactList}\small\item\em Fill get area from gzipped file. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsection{Detailed Description}
Gzipped file stream buffer class. 

This class implements basic\+\_\+filebuf for gzipped files. It doesn\textquotesingle{}t yet support seeking (allowed by zlib but slow/limited), putback and read/write access (tricky). Otherwise, it attempts to be a drop-\/in replacement for the standard file streambuf. 

\subsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classgzfilebuf_aa08da094521bfa645427c0ae4c851504}\label{classgzfilebuf_aa08da094521bfa645427c0ae4c851504}} 
\index{gzfilebuf@{gzfilebuf}!gzfilebuf@{gzfilebuf}}
\index{gzfilebuf@{gzfilebuf}!gzfilebuf@{gzfilebuf}}
\subsubsection{\texorpdfstring{gzfilebuf()}{gzfilebuf()}}
{\footnotesize\ttfamily gzfilebuf\+::gzfilebuf (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

\mbox{\Hypertarget{classgzfilebuf_acb95da35cfe68e16fc85cac62453451d}\label{classgzfilebuf_acb95da35cfe68e16fc85cac62453451d}} 
\index{gzfilebuf@{gzfilebuf}!````~gzfilebuf@{$\sim$gzfilebuf}}
\index{````~gzfilebuf@{$\sim$gzfilebuf}!gzfilebuf@{gzfilebuf}}
\subsubsection{\texorpdfstring{$\sim$gzfilebuf()}{~gzfilebuf()}}
{\footnotesize\ttfamily virtual gzfilebuf\+::$\sim$gzfilebuf (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [virtual]}}



\subsection{Member Function Documentation}
\mbox{\Hypertarget{classgzfilebuf_a72889233c00bfd297ca01723cc4ed8fc}\label{classgzfilebuf_a72889233c00bfd297ca01723cc4ed8fc}} 
\index{gzfilebuf@{gzfilebuf}!attach@{attach}}
\index{attach@{attach}!gzfilebuf@{gzfilebuf}}
\subsubsection{\texorpdfstring{attach()}{attach()}}
{\footnotesize\ttfamily \hyperlink{classgzfilebuf}{gzfilebuf}$\ast$ gzfilebuf\+::attach (\begin{DoxyParamCaption}\item[{\hyperlink{lp__lib_8h_adeb9ec6400320e4923ac9d836d509ddb}{int}}]{fd,  }\item[{std\+::ios\+\_\+base\+::openmode}]{mode }\end{DoxyParamCaption})}



Attach to already open gzipped file. 


\begin{DoxyParams}{Parameters}
{\em fd} & File descriptor. \\
\hline
{\em mode} & Open mode flags. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
{\ttfamily this} on success, N\+U\+LL on failure. 
\end{DoxyReturn}
\mbox{\Hypertarget{classgzfilebuf_a280d1c661fb371c22de1214d5a1682a2}\label{classgzfilebuf_a280d1c661fb371c22de1214d5a1682a2}} 
\index{gzfilebuf@{gzfilebuf}!close@{close}}
\index{close@{close}!gzfilebuf@{gzfilebuf}}
\subsubsection{\texorpdfstring{close()}{close()}}
{\footnotesize\ttfamily \hyperlink{classgzfilebuf}{gzfilebuf}$\ast$ gzfilebuf\+::close (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Close gzipped file. 

\begin{DoxyReturn}{Returns}
{\ttfamily this} on success, N\+U\+LL on failure. 
\end{DoxyReturn}
\mbox{\Hypertarget{classgzfilebuf_a24dfb3e35c147aaf3a562c1ea4268757}\label{classgzfilebuf_a24dfb3e35c147aaf3a562c1ea4268757}} 
\index{gzfilebuf@{gzfilebuf}!is\+\_\+open@{is\+\_\+open}}
\index{is\+\_\+open@{is\+\_\+open}!gzfilebuf@{gzfilebuf}}
\subsubsection{\texorpdfstring{is\+\_\+open()}{is\_open()}}
{\footnotesize\ttfamily bool gzfilebuf\+::is\+\_\+open (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Check if file is open. 

\begin{DoxyReturn}{Returns}
True if file is open. 
\end{DoxyReturn}
\mbox{\Hypertarget{classgzfilebuf_a78281ba60675bf8727e92ed23b4a2cc9}\label{classgzfilebuf_a78281ba60675bf8727e92ed23b4a2cc9}} 
\index{gzfilebuf@{gzfilebuf}!open@{open}}
\index{open@{open}!gzfilebuf@{gzfilebuf}}
\subsubsection{\texorpdfstring{open()}{open()}}
{\footnotesize\ttfamily \hyperlink{classgzfilebuf}{gzfilebuf}$\ast$ gzfilebuf\+::open (\begin{DoxyParamCaption}\item[{const char $\ast$}]{name,  }\item[{std\+::ios\+\_\+base\+::openmode}]{mode }\end{DoxyParamCaption})}



Open gzipped file. 


\begin{DoxyParams}{Parameters}
{\em name} & File name. \\
\hline
{\em mode} & Open mode flags. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
{\ttfamily this} on success, N\+U\+LL on failure. 
\end{DoxyReturn}
\mbox{\Hypertarget{classgzfilebuf_ab0c2c304183e591706681af26add3da2}\label{classgzfilebuf_ab0c2c304183e591706681af26add3da2}} 
\index{gzfilebuf@{gzfilebuf}!open\+\_\+mode@{open\+\_\+mode}}
\index{open\+\_\+mode@{open\+\_\+mode}!gzfilebuf@{gzfilebuf}}
\subsubsection{\texorpdfstring{open\+\_\+mode()}{open\_mode()}}
{\footnotesize\ttfamily bool gzfilebuf\+::open\+\_\+mode (\begin{DoxyParamCaption}\item[{std\+::ios\+\_\+base\+::openmode}]{mode,  }\item[{char $\ast$}]{c\+\_\+mode }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [protected]}}



Convert ios open mode int to mode string used by zlib. 

\begin{DoxyReturn}{Returns}
True if valid mode flag combination. 
\end{DoxyReturn}
\mbox{\Hypertarget{classgzfilebuf_aa5c16941b7897bba35349199cbbac2ed}\label{classgzfilebuf_aa5c16941b7897bba35349199cbbac2ed}} 
\index{gzfilebuf@{gzfilebuf}!overflow@{overflow}}
\index{overflow@{overflow}!gzfilebuf@{gzfilebuf}}
\subsubsection{\texorpdfstring{overflow()}{overflow()}}
{\footnotesize\ttfamily virtual int\+\_\+type gzfilebuf\+::overflow (\begin{DoxyParamCaption}\item[{int\+\_\+type}]{c = {\ttfamily std\+:\+:streambuf\+:\+:traits\+\_\+type\+:\+:eof()} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}



Write put area to gzipped file. 


\begin{DoxyParams}{Parameters}
{\em c} & Extra character to add to buffer contents. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Non-\/\+E\+OF on success, E\+OF on error.
\end{DoxyReturn}
This actually writes characters in stream buffer to gzipped file. With unbuffered output this is done one character at a time. \mbox{\Hypertarget{classgzfilebuf_a11ff58ab8f4de52cf496892b3a97827e}\label{classgzfilebuf_a11ff58ab8f4de52cf496892b3a97827e}} 
\index{gzfilebuf@{gzfilebuf}!setbuf@{setbuf}}
\index{setbuf@{setbuf}!gzfilebuf@{gzfilebuf}}
\subsubsection{\texorpdfstring{setbuf()}{setbuf()}}
{\footnotesize\ttfamily virtual std\+::streambuf$\ast$ gzfilebuf\+::setbuf (\begin{DoxyParamCaption}\item[{char\+\_\+type $\ast$}]{p,  }\item[{std\+::streamsize}]{n }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}



Installs external stream buffer. 


\begin{DoxyParams}{Parameters}
{\em p} & Pointer to char buffer. \\
\hline
{\em n} & Size of external buffer. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
{\ttfamily this} on success, N\+U\+LL on failure.
\end{DoxyReturn}
Call setbuf(0,0) to enable unbuffered output. \mbox{\Hypertarget{classgzfilebuf_ad109ea4fc4ca7cc19d8014b53375255d}\label{classgzfilebuf_ad109ea4fc4ca7cc19d8014b53375255d}} 
\index{gzfilebuf@{gzfilebuf}!setcompression@{setcompression}}
\index{setcompression@{setcompression}!gzfilebuf@{gzfilebuf}}
\subsubsection{\texorpdfstring{setcompression()}{setcompression()}}
{\footnotesize\ttfamily \hyperlink{lp__lib_8h_adeb9ec6400320e4923ac9d836d509ddb}{int} gzfilebuf\+::setcompression (\begin{DoxyParamCaption}\item[{\hyperlink{lp__lib_8h_adeb9ec6400320e4923ac9d836d509ddb}{int}}]{comp\+\_\+level,  }\item[{\hyperlink{lp__lib_8h_adeb9ec6400320e4923ac9d836d509ddb}{int}}]{comp\+\_\+strategy = {\ttfamily Z\+\_\+DEFAULT\+\_\+STRATEGY} }\end{DoxyParamCaption})}



Set compression level and strategy on the fly. 


\begin{DoxyParams}{Parameters}
{\em comp\+\_\+level} & Compression level (see zlib.\+h for allowed values) \\
\hline
{\em comp\+\_\+strategy} & Compression strategy (see zlib.\+h for allowed values) \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Z\+\_\+\+OK on success, Z\+\_\+\+S\+T\+R\+E\+A\+M\+\_\+\+E\+R\+R\+OR otherwise.
\end{DoxyReturn}
Unfortunately, these parameters cannot be modified separately, as the previous zfstream version assumed. Since the strategy is seldom changed, it can default and setcompression(level) then becomes like the old setcompressionlevel(level). \mbox{\Hypertarget{classgzfilebuf_aa6c80a4f96fdc5e4a991113699428164}\label{classgzfilebuf_aa6c80a4f96fdc5e4a991113699428164}} 
\index{gzfilebuf@{gzfilebuf}!showmanyc@{showmanyc}}
\index{showmanyc@{showmanyc}!gzfilebuf@{gzfilebuf}}
\subsubsection{\texorpdfstring{showmanyc()}{showmanyc()}}
{\footnotesize\ttfamily virtual std\+::streamsize gzfilebuf\+::showmanyc (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}



Number of characters available in stream buffer. 

\begin{DoxyReturn}{Returns}
Number of characters.
\end{DoxyReturn}
This indicates number of characters in get area of stream buffer. These characters can be read without accessing the gzipped file. \mbox{\Hypertarget{classgzfilebuf_a8fdf6b079487c0034cb920c63c9eaf55}\label{classgzfilebuf_a8fdf6b079487c0034cb920c63c9eaf55}} 
\index{gzfilebuf@{gzfilebuf}!sync@{sync}}
\index{sync@{sync}!gzfilebuf@{gzfilebuf}}
\subsubsection{\texorpdfstring{sync()}{sync()}}
{\footnotesize\ttfamily virtual \hyperlink{lp__lib_8h_adeb9ec6400320e4923ac9d836d509ddb}{int} gzfilebuf\+::sync (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}



Flush stream buffer to file. 

\begin{DoxyReturn}{Returns}
0 on success, -\/1 on error.
\end{DoxyReturn}
This calls underflow(\+E\+O\+F) to do the job. \mbox{\Hypertarget{classgzfilebuf_a23768f9935022e54608c53173f0047c0}\label{classgzfilebuf_a23768f9935022e54608c53173f0047c0}} 
\index{gzfilebuf@{gzfilebuf}!underflow@{underflow}}
\index{underflow@{underflow}!gzfilebuf@{gzfilebuf}}
\subsubsection{\texorpdfstring{underflow()}{underflow()}}
{\footnotesize\ttfamily virtual int\+\_\+type gzfilebuf\+::underflow (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [protected]}, {\ttfamily [virtual]}}



Fill get area from gzipped file. 

\begin{DoxyReturn}{Returns}
First character in get area on success, E\+OF on error.
\end{DoxyReturn}
This actually reads characters from gzipped file to stream buffer. Always buffered. 

The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
\hyperlink{zfstream_8h}{zfstream.\+h}\end{DoxyCompactItemize}
