\hypertarget{class_s_b_m_l_document}{}\section{S\+B\+M\+L\+Document Class Reference}
\label{class_s_b_m_l_document}\index{S\+B\+M\+L\+Document@{S\+B\+M\+L\+Document}}


{\ttfamily \#include $<$S\+B\+M\+L\+Document.\+h$>$}



\subsection{Detailed Description}
\{core\} Overall S\+B\+ML container object.

When creating fresh models programmatically, the starting point is typically the creation of an \hyperlink{class_s_b_m_l_document}{S\+B\+M\+L\+Document} object instance. The \hyperlink{class_s_b_m_l_document}{S\+B\+M\+L\+Document} constructor accepts arguments for the S\+B\+ML Level and Version of the model to be created. After creating the \hyperlink{class_s_b_m_l_document}{S\+B\+M\+L\+Document} object, calling programs then typically call S\+B\+M\+L\+Document\+::create\+Model() almost immediately, and then proceed to call the methods on the \hyperlink{class_model}{Model} object to fill out the model\textquotesingle{}s contents.

\hyperlink{class_s_b_m_l_document}{S\+B\+M\+L\+Document} corresponds roughly to the class {\itshape Sbml} defined in the S\+B\+ML Level~2 specification and {\itshape S\+B\+ML} in the Level~3 specification. It does not have a direct correspondence in S\+B\+ML Level~1. (However, to make matters simpler for applications, lib\+S\+B\+ML creates an \hyperlink{class_s_b_m_l_document}{S\+B\+M\+L\+Document} no matter whether the model is Level~1, Level~2 or Level~3.) In its barest form, when written out in X\+ML format for (e.\+g.) S\+B\+ML Level~2 Version~4, the corresponding structure is the following\+: \begin{DoxyVerb}<sbml xmlns="http://www.sbml.org/sbml/level2/version4" level="2" version="4">
  ...
</sbml>\end{DoxyVerb}


\hyperlink{class_s_b_m_l_document}{S\+B\+M\+L\+Document} is derived from \hyperlink{class_s_base}{S\+Base}, and therefore contains the usual \hyperlink{class_s_base}{S\+Base} attributes (in S\+B\+ML Level~2 and Level~3) of \char`\"{}metaid\char`\"{} and \char`\"{}sbo\+Term\char`\"{}, as well as the subelements \char`\"{}notes\char`\"{} and \char`\"{}annotation\char`\"{}. It also contains the attributes \char`\"{}level\char`\"{} and \char`\"{}version\char`\"{} indicating the Level and Version of the S\+B\+ML data structure. These can be accessed using the methods defined by the \hyperlink{class_s_base}{S\+Base} class for that purpose.\hypertarget{class_s_b_m_l_document_checking}{}\subsection{Checking consistency and adherence to S\+B\+M\+L specifications}\label{class_s_b_m_l_document_checking}
One of the most important features of lib\+S\+B\+ML is its ability to perform S\+B\+ML validation to ensure that a model adheres to the S\+B\+ML specification for whatever Level+\+Version combination the model uses. \hyperlink{class_s_b_m_l_document}{S\+B\+M\+L\+Document} provides the methods for running consistency-\/checking and validation rules on the S\+B\+ML content.

First, a brief explanation of the rationale is in order. In lib\+S\+B\+ML versions up to and including the version~3.\+3.\+x series, the individual methods for creating and setting attributes and other components were quite lenient, and allowed a caller to compose S\+B\+ML entities that might not, in the end, represent valid S\+B\+ML. This allowed applications the freedom to do things such as save incomplete models (which is useful when models are being developed over long periods of time). In the version~4.\+x series, lib\+S\+B\+ML is somewhat stricter, but still permits structures to be created independently and the results to be combined in a separate step. In all these cases, it means that a separate validation step is necessary when a calling program finally wants to finish a complete S\+B\+ML document.

The primary interface to this validation facility is \hyperlink{class_s_b_m_l_document}{S\+B\+M\+L\+Document}\textquotesingle{}s S\+B\+M\+L\+Document\+::check\+Internal\+Consistency() and S\+B\+M\+L\+Document\+::check\+Consistency(). The former verifies the basic internal consistency and syntax of an S\+B\+ML document, and the latter implements more elaborate validation rules (both those defined by the S\+B\+ML specifications, as well as additional rules offered by lib\+S\+B\+ML).

These methods have slightly different relevance depending on whether a model is created programmaticaly from scratch, or whether it is read in from a file or data stream. The following list summarizes the possible scenarios.

{\itshape Scenario 1\+: Creating a model from scratch}. Before writing out the model,

\begin{DoxyItemize}
\item Call S\+B\+M\+L\+Document\+::check\+Internal\+Consistency(), then inquire about the results by calling S\+B\+M\+L\+Document\+::get\+Num\+Errors()\end{DoxyItemize}
\begin{DoxyItemize}
\item Call S\+B\+M\+L\+Document\+::set\+Consistency\+Checks() to configure which checks will be performed by S\+B\+M\+L\+Document\+::check\+Consistency()\end{DoxyItemize}
\begin{DoxyItemize}
\item Call S\+B\+M\+L\+Document\+::check\+Consistency(), then inquire about the results by calling S\+B\+M\+L\+Document\+::get\+Num\+Errors()\end{DoxyItemize}
{\itshape Scenario 2\+: Reading a model from a file or data stream.} After reading the model,

\begin{DoxyItemize}
\item Basic consistency checks will have been performed automatically by lib\+S\+B\+ML upon reading the content, so you only need to inquire about the results by using S\+B\+M\+L\+Document\+::get\+Num\+Errors()\end{DoxyItemize}
\begin{DoxyItemize}
\item Call S\+B\+M\+L\+Document\+::set\+Consistency\+Checks() to configure which checks are performed by S\+B\+M\+L\+Document\+::check\+Consistency()\end{DoxyItemize}
\begin{DoxyItemize}
\item Call S\+B\+M\+L\+Document\+::check\+Consistency(), then inquire about the results by calling S\+B\+M\+L\+Document\+::get\+Num\+Errors()\end{DoxyItemize}
It should be noted that as of S\+B\+ML Level~3 Version~2, the \hyperlink{class_model}{Model} became an optional child of \hyperlink{class_s_b_m_l_document}{S\+B\+M\+L\+Document}, instead of being required. This means that one can no longer use S\+B\+M\+L\+Document\+::get\+Model() as a cheap method of checking if an S\+B\+ML document was read in properly\+: the more robust get\+Error methods detailed above must be used instead.\hypertarget{class_s_b_m_l_document_converting}{}\subsection{Converting documents between Levels and Versions of S\+B\+ML}\label{class_s_b_m_l_document_converting}
Lib\+S\+B\+ML provides facilities for limited translation of S\+B\+ML between Levels and Versions of the S\+B\+ML specifications. The method for doing is is set\+Level\+And\+Version() . In general, models can be converted upward without difficulty (e.\+g., from S\+B\+ML Level~1 to Level~2, or from an earlier Version of Level~2 to the latest Version of Level~2). Sometimes models can be translated downward as well, if they do not use constructs specific to more advanced Levels of S\+B\+ML.

Calling S\+B\+M\+L\+Document\+::set\+Level\+And\+Version() will not {\itshape necessarily} lead to a successful conversion. The method will return a boolean value to indicate success or failure. Callers must check the error log (see next section) attached to the \hyperlink{class_s_b_m_l_document}{S\+B\+M\+L\+Document} object after calling S\+B\+M\+L\+Document\+::set\+Level\+And\+Version() in order to assess whether any problems arose.

If an application is interested in translating to a lower Level and/or Version of S\+B\+ML within a Level, the following methods allow for prior assessment of whether there is sufficient compatibility to make a translation possible\+:

\begin{DoxyItemize}
\item S\+B\+M\+L\+Document\+::check\+L1\+Compatibility(), \item S\+B\+M\+L\+Document\+::check\+L2v1\+Compatibility(), \item S\+B\+M\+L\+Document\+::check\+L2v2\+Compatibility(), \item S\+B\+M\+L\+Document\+::check\+L2v3\+Compatibility(), \item S\+B\+M\+L\+Document\+::check\+L2v4\+Compatibility(), \item S\+B\+M\+L\+Document\+::check\+L2v5\+Compatibility(), and \item S\+B\+M\+L\+Document\+::check\+L3v1\+Compatibility().\end{DoxyItemize}
Some changes between Versions of S\+B\+ML Level~2 may lead to unexpected behaviors when attempting conversions in either direction. For example, S\+B\+ML Level~2 Version~4 relaxed the requirement for consistency in units of measurement between expressions annd quantities in a model. As a result, a model written in Version~4, if converted to Version~3 with no other changes, may fail validation as a Version~3 model because Version~3 imposed stricter requirements on unit consistency.

Other changes between S\+B\+ML Level 2 and Level 3 make downward conversions challenging. In some cases, it means that a model converted to Level~2 from Level~3 will contain attributes that were not explicitly given in the Level~3 model, because in Level~2 these attributes may have been optional or have default values.\hypertarget{class_s_b_m_l_document_errors}{}\subsection{Error handling}\label{class_s_b_m_l_document_errors}
Upon reading a model, \hyperlink{class_s_b_m_l_document}{S\+B\+M\+L\+Document} logs any problems encountered while reading the model from the file or data stream. The log contains objects that record diagnostic information about any notable issues that arose. Whether the problems are warnings or errors, they are both reported through a single common interface involving the object class \hyperlink{class_s_b_m_l_error}{S\+B\+M\+L\+Error}.

The methods S\+B\+M\+L\+Document\+::get\+Num\+Errors(), S\+B\+M\+L\+Document\+::get\+Error() and S\+B\+M\+L\+Document\+::print\+Errors() allow callers to interact with the warnings or errors logged. Alternatively, callers may retrieve the entire log as an \hyperlink{class_s_b_m_l_error_log}{S\+B\+M\+L\+Error\+Log} object using the method S\+B\+M\+L\+Document\+::get\+Error\+Log(). The \hyperlink{class_s_b_m_l_error_log}{S\+B\+M\+L\+Error\+Log} object provides some alternative methods for interacting with the set of errors and warnings. In either case, applications typically should first call S\+B\+M\+L\+Document\+::get\+Num\+Errors() to find out if any issues have been logged after specific lib\+S\+B\+ML operations such as the ones discussed in the sections above. If they have, then an application will should proceed to inspect the individual reports using either the direct interfaces on \hyperlink{class_s_b_m_l_document}{S\+B\+M\+L\+Document} or using the methods on the \hyperlink{class_s_b_m_l_error_log}{S\+B\+M\+L\+Error\+Log} object. 

The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
\hyperlink{_s_b_m_l_document_8h}{S\+B\+M\+L\+Document.\+h}\end{DoxyCompactItemize}
