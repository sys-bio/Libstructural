\hypertarget{class_priority}{}\section{Priority Class Reference}
\label{class_priority}\index{Priority@{Priority}}


{\ttfamily \#include $<$Priority.\+h$>$}



\subsection{Detailed Description}
\{core\} The priority of execution of an S\+B\+ML {\itshape event}.

The \hyperlink{class_priority}{Priority} object class (which was introduced in S\+B\+ML Level~3 Version~1), like \hyperlink{class_delay}{Delay}, is derived from \hyperlink{class_s_base}{S\+Base} and contains a Math\+ML formula stored in the element \char`\"{}math\char`\"{}. This formula is used to compute a dimensionless numerical value that influences the order in which a simulator is to perform the assignments of two or more events that happen to be executed simultaneously. The formula may evaluate to any {\ttfamily double} value (and thus may be a positive or negative number, or zero), with positive numbers taken to signifying a higher priority than zero or negative numbers. If no \hyperlink{class_priority}{Priority} object is present on a given \hyperlink{class_event}{Event} object, no priority is defined for that event.\hypertarget{class_priority_priority-interp}{}\subsection{The interpretation of priorities on events in a model}\label{class_priority_priority-interp}
For the purposes of S\+B\+ML, {\itshape simultaneous event execution} is defined as the situation in which multiple events have identical times of execution. The time of execution is calculated as the sum of the time at which a given event\textquotesingle{}s \hyperlink{class_trigger}{Trigger} is {\itshape triggered} plus its \hyperlink{class_delay}{Delay} duration, if any. Here, {\itshape identical times} means {\itshape mathematically equal} instants in time. (In practice, simulation software adhering to this specification may have to rely on numerical equality instead of strict mathematical equality; robust models will ensure that this difference will not cause significant discrepancies from expected behavior.)

If no \hyperlink{class_priority}{Priority} subobjects are defined for two or more \hyperlink{class_event}{Event} objects, then those events are still executed simultaneously but their order of execution is {\itshape undefined by the S\+B\+ML Level~3 specification}. A software implementation may choose to execute such simultaneous events in any order, as long as each event is executed only once and the requirements of checking the \char`\"{}persistent\char`\"{} attribute (and acting accordingly) are satisfied.

If \hyperlink{class_priority}{Priority} subobjects are defined for two or more simultaneously-\/triggered events, the order in which those particular events must be executed is dictated by their \hyperlink{class_priority}{Priority} objects, as follows. If the values calculated using the two \hyperlink{class_priority}{Priority} objects\textquotesingle{} \char`\"{}math\char`\"{} expressions differ, then the event having the higher priority value must be executed before the event with the lower value. If, instead, the two priority values are mathematically equal, then the two events must be triggered in a {\itshape random} order. It is important to note that a {\itshape random order is not the same as an undefined order}\+: given multiple runs of the same model with identical conditions, an undefined ordering would permit a system to execute the events in (for example) the same order every time (according to whatever scheme may have been implemented by the system), whereas the explicit requirement for random ordering means that the order of execution in different simulation runs depends on random chance. In other words, given two events {\itshape A} and {\itshape B}, a randomly-\/determined order must lead to an equal chance of executing {\itshape A} first or {\itshape B} first, every time those two events are executed simultaneously.

A model may contain a mixture of events, some of which have \hyperlink{class_priority}{Priority} subobjects and some do not. Should a combination of simultaneous events arise in which some events have priorities defined and others do not, the set of events with defined priorities must trigger in the order determined by their \hyperlink{class_priority}{Priority} objects, and the set of events without \hyperlink{class_priority}{Priority} objects must be executed in an {\itshape undefined} order with respect to each other and with respect to the events with \hyperlink{class_priority}{Priority} subobjects. (Note that {\itshape undefined order} does not necessarily mean random order, although a random ordering would be a valid implementation of this requirement.)

The following example may help further clarify these points. Suppose a model contains four events that should be executed simultaneously, with two of the events having \hyperlink{class_priority}{Priority} objects with the same value and the other two events having \hyperlink{class_priority}{Priority} objects with the same, but different, value. The two events with the higher priorities must be executed first, in a random order with respect to each other, and the remaining two events must be executed after them, again in a random order, for a total of four possible and equally-\/likely event executions\+: A-\/\+B-\/\+C-\/D, A-\/\+B-\/\+D-\/C, B-\/\+A-\/\+C-\/D, and B-\/\+A-\/\+D-\/C. If, instead, the model contains four events all having the same \hyperlink{class_priority}{Priority} values, there are 4! or 24 possible orderings, each of which must be equally likely to be chosen. Finally, if none of the four events has a \hyperlink{class_priority}{Priority} subobject defined, or even if exactly one of the four events has a defined \hyperlink{class_priority}{Priority}, there are again 24 possible orderings, but the likelihood of choosing any particular ordering is undefined; the simulator can choose between events as it wishes. (The S\+B\+ML specification only defines the effects of priorities on \hyperlink{class_event}{Event} objects with respect to {\itshape other} \hyperlink{class_event}{Event} objects with priorities. Putting a priority on a {\itshape single} \hyperlink{class_event}{Event} object in a model does not cause it to fall within that scope.)\hypertarget{class_priority_priority-eval}{}\subsection{Evaluation of Priority expressions}\label{class_priority_priority-eval}
An event\textquotesingle{}s \hyperlink{class_priority}{Priority} object \char`\"{}math\char`\"{} expression must be evaluated at the time the \hyperlink{class_event}{Event} is to be {\itshape executed}. During a simulation, all simultaneous events have their \hyperlink{class_priority}{Priority} values calculated, and the event with the highest priority is selected for next execution. Note that it is possible for the execution of one \hyperlink{class_event}{Event} object to cause the \hyperlink{class_priority}{Priority} value of another simultaneously-\/executing \hyperlink{class_event}{Event} object to change (as well as to trigger other events, as already noted). Thus, after executing one event, and checking whether any other events in the model have been triggered, all remaining simultaneous events that {\itshape either} (i) have \hyperlink{class_trigger}{Trigger} objects with attributes \char`\"{}persistent\char`\"{}={\ttfamily false} {\itshape or} (ii) have \hyperlink{class_trigger}{Trigger} expressions that did not transition from {\ttfamily true} to {\ttfamily false}, must have their \hyperlink{class_priority}{Priority} expression reevaluated. The highest-\/priority remaining event must then be selected for execution next.\hypertarget{class_priority_priority-units}{}\subsection{Units of Priority object\textquotesingle{}s mathematical expressions}\label{class_priority_priority-units}
The unit associated with the value of a \hyperlink{class_priority}{Priority} object\textquotesingle{}s \char`\"{}math\char`\"{} expression should be {\ttfamily dimensionless}. This is because the priority expression only serves to provide a relative ordering between different events, and only has meaning with respect to other \hyperlink{class_priority}{Priority} object expressions. The value of \hyperlink{class_priority}{Priority} objects is not comparable to any other kind of object in an S\+B\+ML model.

\begin{DoxyNote}{Note}
The \hyperlink{class_priority}{Priority} construct exists only in S\+B\+ML Level~3; it cannot be used in S\+B\+ML Level~2 or Level~1 models.
\end{DoxyNote}
\hypertarget{class_priority_priority-restrictions}{}\subsection{Restrictions relaxed in S\+B\+M\+L Level 3 Version 2}\label{class_priority_priority-restrictions}
In S\+B\+ML Level~3 Version~2, the requirement that a \hyperlink{class_priority}{Priority} have a \char`\"{}math\char`\"{} subelement was relaxed, making it optional. In this case, the \hyperlink{class_priority}{Priority} remains undefined, and unless that information is provided in some other form (such as with an S\+B\+ML Level~3 package), the \hyperlink{class_event}{Event} behaves as if it had no \hyperlink{class_priority}{Priority}.

\begin{DoxySeeAlso}{See also}
\hyperlink{class_event}{Event} 

\hyperlink{class_delay}{Delay} 

\hyperlink{class_event_assignment}{Event\+Assignment} 
\end{DoxySeeAlso}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
\hyperlink{_priority_8h}{Priority.\+h}\end{DoxyCompactItemize}
