\hypertarget{class_unit_definition}{}\section{Unit\+Definition Class Reference}
\label{class_unit_definition}\index{Unit\+Definition@{Unit\+Definition}}


{\ttfamily \#include $<$Unit\+Definition.\+h$>$}



\subsection{Detailed Description}
\{core\} A definition of a unit used in an S\+B\+ML model.

Units of measurement may be supplied in a number of contexts in an S\+B\+ML model. The S\+B\+ML unit definition facility uses two classes of objects, \hyperlink{class_unit_definition}{Unit\+Definition} and \hyperlink{class_unit}{Unit}. The approach to defining units in S\+B\+ML is compositional; for example, {\itshape meter second\textsuperscript{ --2}} is constructed by combining a \hyperlink{class_unit}{Unit} object representing {\itshape meter} with another \hyperlink{class_unit}{Unit} object representing {\itshape second\textsuperscript{ --2}}. The combination is wrapped inside a \hyperlink{class_unit_definition}{Unit\+Definition}, which provides for assigning an identifier and optional name to the combination. The identifier can then be referenced from elsewhere in a model. Thus, the \hyperlink{class_unit_definition}{Unit\+Definition} class is the container, and \hyperlink{class_unit}{Unit} instances are placed inside \hyperlink{class_unit_definition}{Unit\+Definition} instances.

Two points are worth discussing in the context of S\+B\+ML units. First, unit declarations in S\+B\+ML models are {\itshape optional}. The consequence of this is that a model must be numerically self-\/consistent independently of unit declarations, for the benefit of software tools that cannot interpret or manipulate units. \hyperlink{class_unit}{Unit} declarations in S\+B\+ML are thus more akin to a type of annotation; they can indicate intentions, and can be used by model readers for checking the consistency of the model, labeling simulation output, etc., but any transformations of values implied by different units must be incorporated {\itshape explicitly} into a model.

Second, the vast majority of situations that require new S\+B\+ML unit definitions involve simple multiplicative combinations of base units and factors. An example is {\itshape moles per litre per second}. What distinguishes these sorts of unit definitions from more complex ones is that they may be expressed without the use of an additive offset from a zero point. The use of offsets complicates all unit definition systems, yet in the domain of S\+B\+ML, the real-\/life cases requiring offsets are few (and in fact, to the best of our knowledge, only involve temperature). Consequently, the S\+B\+ML unit system has been consciously designed to simplify implementation of unit support for the most common cases in systems biology. The cost of this simplification is to require units with offsets to be handled explicitly by the modeler.\hypertarget{class_unit_definition_unitdef-summary}{}\subsection{Summary of the Unit\+Definition construct}\label{class_unit_definition_unitdef-summary}
\hyperlink{class_unit_definition}{Unit\+Definition} has two attributes and one subelement. The two attributes are \char`\"{}id\char`\"{} and \char`\"{}name\char`\"{}, and the subelement is \hyperlink{class_list_of_units}{List\+Of\+Units}.

The required attribute \char`\"{}id\char`\"{} and optional attribute \char`\"{}name\char`\"{} are both strings. The \char`\"{}id\char`\"{} attribute is used to give the defined unit a unique identifier by which other parts of an S\+B\+ML model definition can refer to it. The \char`\"{}name\char`\"{} attribute is intended to be used for giving the unit definition an optional human-\/readable name. Please see the \href{#unitdef-id}{\tt next section} for information about the values permitted for \char`\"{}id\char`\"{}.

A \hyperlink{class_unit_definition}{Unit\+Definition} may contain exactly one \hyperlink{class_list_of_units}{List\+Of\+Units}, and this list may contain one or more \hyperlink{class_unit}{Unit} definitions; see the definitions of these other object classes for more information about them. In S\+B\+ML Level~2 and S\+B\+ML Level~3 Version~1, if the \hyperlink{class_list_of_units}{List\+Of\+Units} was present, it must have one or more \hyperlink{class_unit}{Unit} definitions. In S\+B\+ML Level~3 Version~2, this restriction was relaxed, and a \hyperlink{class_list_of_units}{List\+Of\+Units} was allowed to be empty. In either case, if a \hyperlink{class_unit_definition}{Unit\+Definition} had no child \hyperlink{class_unit}{Unit} elements, the unit was considered to be undefined.

The following example illustrates a complete unit definition (when written in X\+ML) when all the pieces are combined together. This defines \char`\"{}mmls\char`\"{} to be millimoles per litre per second. \begin{DoxyVerb}<listOfUnitDefinitions>
    <unitDefinition id="mmls">
        <listOfUnits>
            <unit kind="mole"   scale="-3"/>
            <unit kind="litre"  exponent="-1"/>
            <unit kind="second" exponent="-1"/>
        </listOfUnits>
    </unitDefinition>
</listOfUnitDefinitions>
\end{DoxyVerb}
\hypertarget{class_unit_definition_unitdef-id}{}\subsection{Special considerations for Unit object identifiers}\label{class_unit_definition_unitdef-id}
The attribute \char`\"{}id\char`\"{} in \hyperlink{class_unit_definition}{Unit\+Definition} cannot be given simply any value, and the precise details of the values permitted differ slightly between Levels of S\+B\+ML\+: 
\begin{DoxyItemize}
\item The \char`\"{}id\char`\"{} of a \hyperlink{class_unit_definition}{Unit\+Definition} must {\itshape not} contain a value from the list of S\+B\+ML\textquotesingle{}s predefined base unit names (i.\+e., the strings {\ttfamily gram}, {\ttfamily litre}, etc.). In S\+B\+ML Level~3, this list consists of the following\+:

\begin{DoxyParagraph}{}
\tabulinesep=1mm
\begin{longtabu} spread 0pt [c]{*{6}{|X[-1]}|}
\hline
ampere&farad&joule&lux&radian&volt  \\\cline{1-6}
avogadro&gram&katal&metre&second&watt  \\\cline{1-6}
becquerel&gray&kelvin&mole&siemens&weber  \\\cline{1-6}
candela&henry&kilogram&newton&sievert  \\\cline{1-6}
coulomb&hertz&litre&ohm&steradian  \\\cline{1-6}
dimensionless&item&lumen&pascal&tesla  \\\cline{1-6}
\end{longtabu}

\end{DoxyParagraph}
This list of predefined base units is nearly identical in S\+B\+ML Level~2 Version~4, the exception being that Level~2 does not define {\ttfamily avogadro}. S\+B\+ML Level~2 Version~1 (and {\itshape only} this Level+\+Version combination) provides an additional predefined unit name, {\ttfamily Celsius}, not available in Level~3. Finally, S\+B\+ML Level~1 Versions~2--3 provide two more additional predefined unit names, {\ttfamily meter} and {\ttfamily liter}. This is explained in somewhat greater detail in the description of the \hyperlink{class_unit}{Unit} class.


\begin{DoxyItemize}
\item In S\+B\+ML Level~2 (all Versions), there is an additional set of reserved identifiers\+: {\ttfamily substance}, {\ttfamily volume}, {\ttfamily area}, {\ttfamily length}, and {\ttfamily time}. Using one of these values for the attribute \char`\"{}id\char`\"{} of a \hyperlink{class_unit_definition}{Unit\+Definition} has the effect of redefining the model-\/wide default units for the corresponding quantities. The list of special unit names in S\+B\+ML Level~2 is given in the table below\+: 
\end{DoxyItemize}



Also, S\+B\+ML Level~2 imposes two limitations on redefining the predefined unit {\ttfamily substance}, {\ttfamily volume}, {\ttfamily area}, {\ttfamily length}, and {\ttfamily time\+:} (1) The \hyperlink{class_unit_definition}{Unit\+Definition} of a predefined S\+B\+ML unit can only contain a single \hyperlink{class_unit}{Unit} object within it. (2) The value of the \char`\"{}kind\char`\"{} attribute in a \hyperlink{class_unit}{Unit} instance must be drawn from one of the values in the second column of the table above.

The special unit names {\ttfamily substance}, {\ttfamily volume}, {\ttfamily area}, {\ttfamily length}, and {\ttfamily time} are not defined by S\+B\+ML Level~3, which uses a different approach to setting model-\/wide inherited units.


\end{DoxyItemize}\hypertarget{class_unit_definition_sbml-units-limits}{}\subsection{Further comments about S\+B\+M\+L\textquotesingle{}s unit definition system}\label{class_unit_definition_sbml-units-limits}
The vast majority of modeling situations requiring new S\+B\+ML unit definitions involve simple multiplicative combinations of base units and factors. An example of this might be {\itshape moles per litre per second}. What distinguishes these sorts of simpler unit definitions from more complex ones is that they may be expressed without the use of an additive offset from a zero point. The use of offsets complicates all unit definition systems, yet in the domain of S\+B\+ML the real-\/life cases requiring offsets are few (and in fact, to the best of our knowledge, only involve temperature). Consequently, the S\+B\+ML unit system has been consciously designed in a way that attempts to simplify implementation of unit support for the most common cases in systems biology.

As of S\+B\+ML Level~2 Version~2, \hyperlink{class_unit}{Unit} no longer has the attribute called \char`\"{}offset\char`\"{} introduced in S\+B\+ML Level~2 Version~1. It turned out that the general case involving units with offsets was incorrectly defined, and few (if any) developers even attempted to support offset-\/based units in their software. In the development of Level~2 Version~2, a consensus among S\+B\+ML developers emerged that a fully generalized unit scheme is {\itshape so} confusing and complicated that it actually {\itshape impedes} interoperability. S\+B\+ML Level~2 Version~2, Version~3 and Version~4 acknowledge this reality by reducing and simplifying the unit system, specifically by removing the \char`\"{}offset\char`\"{} attribute on \hyperlink{class_unit}{Unit} and {\ttfamily Celsius} as a pre-\/defined unit.

The following guidelines suggest methods for handling units that do require the use of zero offsets for their definitions\+: 
\begin{DoxyItemize}
\item {\itshape Handling Celsius}. A model in which certain quantities are temperatures measured in degrees Celsius can be converted straightforwardly to a model in which those temperatures are in kelvin. A software tool could do this by performing a straightforward substitution using the following relationship\+: {\itshape T\textsubscript{ kelvin} = T\textsubscript{Celsius} + 273.\+15}. In every mathematical formula of the model where a quantity (call it {\itshape x}) in degrees Celsius appears, replace {\itshape x} with {\itshape x\textsubscript{k}+ 273.\+15}, where {\itshape x\textsubscript{k}} is now in kelvin. An alternative approach would be to use a \hyperlink{class_function_definition}{Function\+Definition} object to define a function encapsulating this relationship above and then using that in the rest of the model as needed. Since Celsius is a commonly-\/used unit, software tools could help users by providing users with the ability to express temperatures in Celsius in the tools\textquotesingle{} interfaces, and making substitutions automatically when writing out the S\+B\+ML.


\item {\itshape Other units requiring offsets}. One approach to handling other kinds of units is to use a \hyperlink{class_function_definition}{Function\+Definition} to define a function encapsulating the necessary mathematical relationship, then substituting a call to this function wherever the original quantity appeared in the model. For example, here is a possible definition for converting Fahrenheit to Celsius degrees\+: \begin{DoxyVerb}<functionDefinition id="Fahrenheit_to_kelvin">
    <math xmlns="http://www.w3.org/1998/Math/MathML">
        <lambda>
            <bvar><ci> temp_in_fahrenheit </ci></bvar>
            <apply>
                <divide/>
                <apply>
                    <plus/>
                    <ci> temp_in_fahrenheit </ci>
                    <cn> 459.67 </cn>
                </apply>
                <cn> 1.8 </cn>
            </apply>
        </lambda>
    </math>
</functionDefinition>
\end{DoxyVerb}



\item An alternative approach not requiring the use of function definitions is to use an \hyperlink{class_assignment_rule}{Assignment\+Rule} for each variable in Fahrenheit units. The \hyperlink{class_assignment_rule}{Assignment\+Rule} could compute the conversion from Fahrenheit to (say) kelvin, assign its value to a variable (in Kelvin units), and then that variable could be used elsewhere in the model.


\item Still another approach is to rewrite the mathematical formulas of a model to directly incorporate the conversion formula wherever the original quantity appeared. 
\end{DoxyItemize}

Please consult the S\+B\+ML specifications for more information about this and other issues involving units. 

The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
\hyperlink{_unit_definition_8h}{Unit\+Definition.\+h}\end{DoxyCompactItemize}
