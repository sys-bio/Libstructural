\hypertarget{class_species}{}\section{Species Class Reference}
\label{class_species}\index{Species@{Species}}


{\ttfamily \#include $<$Species.\+h$>$}



\subsection{Detailed Description}
\{core\} An S\+B\+ML {\itshape species} -- a pool of entities.

A {\itshape species} in S\+B\+ML refers to a pool of entities that (a) are considered indistinguishable from each other for the purposes of the model, (b) participate in reactions, and (c) are located in a specific {\itshape compartment}. The S\+B\+ML \hyperlink{class_species}{Species} object class is intended to represent these pools.

As with other major constructs in S\+B\+ML, \hyperlink{class_species}{Species} has a mandatory attribute, \char`\"{}id\char`\"{}, used to give the species type an identifier in the model. The identifier must be a text string conforming to the identifer syntax permitted in S\+B\+ML. \hyperlink{class_species}{Species} also has an optional \char`\"{}name\char`\"{} attribute, of type {\ttfamily string}. The \char`\"{}id\char`\"{} and \char`\"{}name\char`\"{} must be used according to the guidelines described in the S\+B\+ML specifications.

The required attribute \char`\"{}compartment\char`\"{} is used to identify the compartment in which the species is located. The attribute\textquotesingle{}s value must be the identifier of an existing \hyperlink{class_compartment}{Compartment} object. It is important to note that there is no default value for the \char`\"{}compartment\char`\"{} attribute on \hyperlink{class_species}{Species}; every species in an S\+B\+ML model must be assigned a compartment {\itshape explicitly}. (This also implies that every model with one or more \hyperlink{class_species}{Species} objects must define at least one \hyperlink{class_compartment}{Compartment} object.)\hypertarget{class_species_species-amounts}{}\subsection{The initial amount and concentration of a species}\label{class_species_species-amounts}
The optional attributes \char`\"{}initial\+Amount\char`\"{} and \char`\"{}initial\+Concentration\char`\"{}, both having a data type of {\ttfamily double}, can be used to set the {\itshape initial} quantity of the species in the compartment where the species is located. These attributes are mutually exclusive; i.\+e., {\itshape only one} can have a value on any given instance of a \hyperlink{class_species}{Species} object. Missing \char`\"{}initial\+Amount\char`\"{} and \char`\"{}initial\+Concentration\char`\"{} values implies that their values either are unknown, or to be obtained from an external source, or determined by an \hyperlink{class_initial_assignment}{Initial\+Assignment} or other S\+B\+ML construct elsewhere in the model.

A species\textquotesingle{} initial quantity in S\+B\+ML is set by the \char`\"{}initial\+Amount\char`\"{} or \char`\"{}initial\+Concentration\char`\"{} attribute exactly once. If the \char`\"{}constant\char`\"{} attribute is {\ttfamily true}, then the value of the species\textquotesingle{} quantity is fixed and cannot be changed except by an \hyperlink{class_initial_assignment}{Initial\+Assignment}. These methods differ in that the \char`\"{}initial\+Amount\char`\"{} and \char`\"{}initial\+Concentration\char`\"{} attributes can only be used to set the species quantity to a literal floating-\/point number, whereas the use of an \hyperlink{class_initial_assignment}{Initial\+Assignment} object allows the value to be set using an arbitrary mathematical expression (which, thanks to Math\+ML\textquotesingle{}s expressiveness, may evaluate to a rational number). If the species\textquotesingle{} \char`\"{}constant\char`\"{} attribute is {\ttfamily false}, the species\textquotesingle{} quantity value may be overridden by an \hyperlink{class_initial_assignment}{Initial\+Assignment} or changed by \hyperlink{class_assignment_rule}{Assignment\+Rule} or \hyperlink{class_algebraic_rule}{Algebraic\+Rule}, and in addition, for {\itshape t $>$ 0}, it may also be changed by a \hyperlink{class_rate_rule}{Rate\+Rule}, \hyperlink{class_event}{Event} objects, and as a result of being a reactant or product in one or more \hyperlink{class_reaction}{Reaction} objects. (However, some constructs are mutually exclusive; see the S\+B\+ML specifications for the precise details.) It is not an error to define \char`\"{}initial\+Amount\char`\"{} or \char`\"{}initial\+Concentration\char`\"{} on a species and also redefine the value using an \hyperlink{class_initial_assignment}{Initial\+Assignment}, but the \char`\"{}initial\+Amount\char`\"{} or \char`\"{}initial\+Concentration\char`\"{} setting in that case is ignored. The S\+B\+ML specifications provide additional information about the semantics of assignments, rules and values for simulation time {\itshape t} $\leq$ {\itshape 0}.

S\+B\+ML Level~2 additionally stipulates that in cases where a species\textquotesingle{} compartment has a \char`\"{}spatial\+Dimensions\char`\"{} value of {\ttfamily 0} (zero), the species cannot have a value for \char`\"{}initial\+Concentration\char`\"{} because the concepts of concentration and density break down when a container has zero dimensions.\hypertarget{class_species_species-units}{}\subsection{The units of a species\textquotesingle{} amount or concentration}\label{class_species_species-units}
When the attribute \char`\"{}initial\+Amount\char`\"{} is set, the unit of measurement associated with the value of \char`\"{}initial\+Amount\char`\"{} is specified by the \hyperlink{class_species}{Species} attribute \char`\"{}substance\+Units\char`\"{}. When the \char`\"{}initial\+Concentration\char`\"{} attribute is set, the unit of measurement associated with this concentration value is \{{\itshape unit of amount}\} divided by \{{\itshape unit of size}\}, where the \{{\itshape unit of amount}\} is specified by the \hyperlink{class_species}{Species} \char`\"{}substance\+Units\char`\"{} attribute, and the \{{\itshape unit of size}\} is specified by the \char`\"{}units\char`\"{} attribute of the \hyperlink{class_compartment}{Compartment} object in which the species is located. Note that in either case, a unit of {\itshape amount} is involved and determined by the \char`\"{}substance\+Units\char`\"{} attribute. Note {\bfseries these two attributes alone do not determine the units of the species when the species identifier appears in a mathematical expression}; {\itshape that} aspect is determined by the attribute \char`\"{}has\+Only\+Substance\+Units\char`\"{} discussed below.

In S\+B\+ML Level~3, if the \char`\"{}substance\+Units\char`\"{} attribute is not set on a given \hyperlink{class_species}{Species} object instance, then the unit of {\itshape amount} for that species is inherited from the \char`\"{}substance\+Units\char`\"{} attribute on the enclosing \hyperlink{class_model}{Model} object instance. If that attribute on \hyperlink{class_model}{Model} is not set either, then the unit associated with the species\textquotesingle{} quantity is undefined.

In S\+B\+ML Level~2, if the \char`\"{}substance\+Units\char`\"{} attribute is not set on a given \hyperlink{class_species}{Species} object instance, then the unit of {\itshape amount} for that species is taken from the predefined S\+B\+ML unit identifier {\ttfamily \char`\"{}substance\char`\"{}}. The value assigned to \char`\"{}substance\+Units\char`\"{} must be chosen from one of the following possibilities\+: one of the base unit identifiers defined in S\+B\+ML, the built-\/in unit identifier {\ttfamily \char`\"{}substance\char`\"{}}, or the identifier of a new unit defined in the list of unit definitions in the enclosing \hyperlink{class_model}{Model} object. The chosen units for \char`\"{}substance\+Units\char`\"{} must be be {\ttfamily \char`\"{}dimensionless\char`\"{}}, {\ttfamily \char`\"{}mole\char`\"{}}, {\ttfamily \char`\"{}item\char`\"{}}, {\ttfamily \char`\"{}kilogram\char`\"{}}, {\ttfamily \char`\"{}gram\char`\"{}}, or units derived from these.

As noted at the beginning of this section, simply setting \char`\"{}initial\+Amount\char`\"{} or \char`\"{}initial\+Concentration\char`\"{} alone does {\itshape not} determine whether a species identifier represents an amount or a concentration when it appears elsewhere in an S\+B\+ML model. The role of the attribute \char`\"{}has\+Only\+Substance\+Units\char`\"{} is to indicate whether the units of the species, when the species identifier appears in mathematical formulas, are intended to be concentration or amount. The attribute takes on a boolean value. In S\+B\+ML Level~3, the attribute has no default value and must always be set in a model; in S\+B\+ML Level~2, it has a default value of {\ttfamily false}.

The {\itshape units of the species} are used in the following ways\+: 
\begin{DoxyItemize}
\item When the species\textquotesingle{} identifier appears in a Math\+ML formula, it represents the species\textquotesingle{} quantity, and the unit of measurement associated with the quantity is as described above.


\item The \char`\"{}math\char`\"{} elements of \hyperlink{class_assignment_rule}{Assignment\+Rule}, \hyperlink{class_initial_assignment}{Initial\+Assignment} and \hyperlink{class_event_assignment}{Event\+Assignment} objects referring to this species should all have the same units as the unit of measurement associated with the species quantity.


\item In a \hyperlink{class_rate_rule}{Rate\+Rule} object that defines the rate of change of the species\textquotesingle{} quantity, the unit associated with the rule\textquotesingle{}s \char`\"{}math\char`\"{} element should be equal to the unit of the species\textquotesingle{} quantity divided by the model-\/wide unit of {\itshape time}; in other words, \{{\itshape unit of species quantity}\}/\{{\itshape unit of time}\}.


\end{DoxyItemize}\hypertarget{class_species_species-constant}{}\subsection{The \char`\"{}constant\char`\"{} and \char`\"{}boundary\+Condition\char`\"{} attributes}\label{class_species_species-constant}
The \hyperlink{class_species}{Species} object class has two boolean attributes named \char`\"{}constant\char`\"{} and \char`\"{}boundary\+Condition\char`\"{}, used to indicate whether and how the quantity of that species can vary during a simulation. In S\+B\+ML Level~2 they are optional; in S\+B\+ML Level~3 they are mandatory. The following table shows how to interpret the combined values of these attributes.



By default, when a species is a product or reactant of one or more reactions, its quantity is determined by those reactions. In S\+B\+ML, it is possible to indicate that a given species\textquotesingle{} quantity is {\itshape not} determined by the set of reactions even when that species occurs as a product or reactant; i.\+e., the species is on the {\itshape boundary} of the reaction system, and its quantity is not determined by the reactions. The boolean attribute \char`\"{}boundary\+Condition\char`\"{} can be used to indicate this. A value of {\ttfamily false} indicates that the species {\itshape is} part of the reaction system. In S\+B\+ML Level~2, the attribute has a default value of {\ttfamily false}, while in S\+B\+ML Level~3, it has no default.

The \char`\"{}constant\char`\"{} attribute indicates whether the species\textquotesingle{} quantity can be changed at all, regardless of whether by reactions, rules, or constructs other than \hyperlink{class_initial_assignment}{Initial\+Assignment}. A value of {\ttfamily false} indicates that the species\textquotesingle{} quantity can be changed. (This is also a common value because the purpose of most simulations is precisely to calculate changes in species quantities.) In S\+B\+ML Level~2, the attribute has a default value of {\ttfamily false}, while in S\+B\+ML Level~3, it has no default. Note that the initial quantity of a species can be set by an \hyperlink{class_initial_assignment}{Initial\+Assignment} irrespective of the value of the \char`\"{}constant\char`\"{} attribute.

In practice, a \char`\"{}boundary\+Condition\char`\"{} value of {\ttfamily true} means a differential equation derived from the reaction definitions should not be generated for the species. However, the species\textquotesingle{} quantity may still be changed by \hyperlink{class_assignment_rule}{Assignment\+Rule}, \hyperlink{class_rate_rule}{Rate\+Rule}, \hyperlink{class_algebraic_rule}{Algebraic\+Rule}, \hyperlink{class_event}{Event}, and \hyperlink{class_initial_assignment}{Initial\+Assignment} constructs if its \char`\"{}constant\char`\"{} attribute is {\ttfamily false}. Conversely, if the species\textquotesingle{} \char`\"{}constant\char`\"{} attribute is {\ttfamily true}, then its value cannot be changed by anything except \hyperlink{class_initial_assignment}{Initial\+Assignment}.

A species having \char`\"{}boundary\+Condition\char`\"{}={\ttfamily false} and \char`\"{}constant\char`\"{}={\ttfamily false} can appear as a product and/or reactant of one or more reactions in the model. If the species is a reactant or product of a reaction, it must {\itshape not} also appear as the target of any \hyperlink{class_assignment_rule}{Assignment\+Rule} or \hyperlink{class_rate_rule}{Rate\+Rule} object in the model. If instead the species has \char`\"{}boundary\+Condition\char`\"{}={\ttfamily false} and \char`\"{}constant\char`\"{}={\ttfamily true}, then it cannot appear as a reactant or product, or as the target of any \hyperlink{class_assignment_rule}{Assignment\+Rule}, \hyperlink{class_rate_rule}{Rate\+Rule} or \hyperlink{class_event_assignment}{Event\+Assignment} object in the model.

Finally, it is worth clarifying that while the constant and boundary\+Condition attributes restrict whether and how the species amount changes, the same is not true of a species\textquotesingle{} concentration. In S\+B\+ML, the concentration of a species is a quantity that depends on the size of the compartment in which it is located. A compartment\textquotesingle{}s size may change, and therefore, so can the concentration of a species even if the amount of the species remains unchanged. A species\textquotesingle{} concentration may therefore vary even if the \hyperlink{class_species}{Species} object\textquotesingle{}s constant attribute is set to {\ttfamily true} in a model.\hypertarget{class_species_species-l2-convfactor}{}\subsection{The conversion\+Factor attribute in S\+B\+M\+L Level 3}\label{class_species_species-l2-convfactor}
In S\+B\+ML Level~3, \hyperlink{class_species}{Species} has an additional optional attribute, \char`\"{}conversion\+Factor\char`\"{}, that defines a conversion factor that applies to a particular species. The value must be the identifier of a \hyperlink{class_parameter}{Parameter} object instance defined in the model. That \hyperlink{class_parameter}{Parameter} object must be a constant, meaning its \char`\"{}constant\char`\"{} attribute must be set to {\ttfamily true}. If a given \hyperlink{class_species}{Species} object definition defines a value for its \char`\"{}conversion\+Factor\char`\"{} attribute, it takes precedence over any factor defined by the \hyperlink{class_model}{Model} object\textquotesingle{}s \char`\"{}conversion\+Factor\char`\"{} attribute.

The unit of measurement associated with a species\textquotesingle{} quantity can be different from the unit of extent of reactions in the model. S\+B\+ML Level~3 avoids implicit unit conversions by providing an explicit way to indicate any unit conversion that might be required. The use of a conversion factor in computing the effects of reactions on a species\textquotesingle{} quantity is explained in detail in the S\+B\+ML Level~3 specification document. Because the value of the \char`\"{}conversion\+Factor\char`\"{} attribute is the identifier of a \hyperlink{class_parameter}{Parameter} object, and because parameters can have units attached to them, the transformation from reaction extent units to species units can be completely specified using this approach.

Note that the unit conversion factor is {\bfseries only applied when calculating the effect of a reaction on a species}. It is not used in any rules or other S\+B\+ML constructs that affect the species, and it is also not used when the value of the species is referenced in a mathematical expression.\hypertarget{class_species_species-l2-type}{}\subsection{The species\+Type attribute in S\+B\+M\+L Level 2 Versions 2–4}\label{class_species_species-l2-type}
In S\+B\+ML Level~2 Versions~2--4, each species in a model may optionally be designated as belonging to a particular species type. The optional attribute \char`\"{}species\+Type\char`\"{} is used to identify the species type of the chemical entities that make up the pool represented by the \hyperlink{class_species}{Species} objects. The attribute\textquotesingle{}s value must be the identifier of an existing \hyperlink{class_species_type}{Species\+Type} object in the model. If the \char`\"{}species\+Type\char`\"{} attribute is not present on a particular species definition, it means the pool contains chemical entities of a type unique to that pool; in effect, a virtual species type is assumed for that species, and no other species can belong to that species type. The value of \char`\"{}species\+Type\char`\"{} attributes on species have no effect on the numerical interpretation of a model; simulators and other numerical analysis software may ignore \char`\"{}species\+Type\char`\"{} attributes.

There can be only one species of a given species type in any given compartment of a model. More specifically, for all \hyperlink{class_species}{Species} objects having a value for the \char`\"{}species\+Type\char`\"{} attribute, the pair \begin{center} (\char`\"{}species\+Type\char`\"{} attribute value, \char`\"{}compartment\char`\"{} attribute value) \end{center} 

must be unique across the set of all \hyperlink{class_species}{Species} object in a model.\hypertarget{class_species_species-other}{}\subsection{The spatial\+Size\+Units attribute in S\+B\+M\+L Level 2 Versions 1–2}\label{class_species_species-other}
In versions of S\+B\+ML Level~2 before Version~3, the class \hyperlink{class_species}{Species} included an attribute called \char`\"{}spatial\+Size\+Units\char`\"{}, which allowed explicitly setting the units of size for initial concentration. Lib\+S\+B\+ML retains this attribute for compatibility with older definitions of Level~2, but its use is strongly discouraged because many software tools do no properly interpret this unit declaration and it is incompatible with all S\+B\+ML specifications after Level~2 Version~3.\hypertarget{class_species_species-math}{}\subsection{Additional considerations for interpreting the numerical value of a species}\label{class_species_species-math}
\hyperlink{class_species}{Species} are unique in S\+B\+ML in that they have a kind of duality\+: a species identifier may stand for either substance amount (meaning, a count of the number of individual entities) or a concentration or density (meaning, amount divided by a compartment size). The previous sections explain the meaning of a species identifier when it is referenced in a mathematical formula or in rules or other S\+B\+ML constructs; however, it remains to specify what happens to a species when the compartment in which it is located changes in size.

When a species definition has a \char`\"{}has\+Only\+Substance\+Units\char`\"{} attribute value of {\ttfamily false} and the size of the compartment in which the species is located changes, the default in S\+B\+ML is to assume that it is the concentration that must be updated to account for the size change. This follows from the principle that, all other things held constant, if a compartment simply changes in size, the size change does not in itself cause an increase or decrease in the number of entities of any species in that compartment. In a sense, the default is that the {\itshape amount} of a species is preserved across compartment size changes. Upon such size changes, the value of the concentration or density must be recalculated from the simple relationship {\itshape concentration = amount / size} if the value of the concentration is needed (for example, if the species identifier appears in a mathematical formula or is otherwise referenced in an S\+B\+ML construct). There is one exception\+: if the species\textquotesingle{} quantity is determined by an \hyperlink{class_assignment_rule}{Assignment\+Rule}, \hyperlink{class_rate_rule}{Rate\+Rule}, \hyperlink{class_algebraic_rule}{Algebraic\+Rule}, or an \hyperlink{class_event_assignment}{Event\+Assignment} and the species has a \char`\"{}has\+Only\+Substance\+Units\char`\"{} attribute value of {\ttfamily false}, it means that the {\itshape concentration} is assigned by the rule or event; in that case, the {\itshape amount} must be calculated when the compartment size changes. (Events also require additional care in this situation, because an event with multiple assignments could conceivably reassign both a species quantity and a compartment size simultaneously. Please refer to the S\+B\+ML specifications for the details.)

Note that the above only matters if a species has a \char`\"{}has\+Only\+Substance\+Units\char`\"{} attribute value of {\ttfamily false}, meaning that the species identifier refers to a concentration wherever the identifier appears in a mathematical formula. If instead the attribute\textquotesingle{}s value is {\ttfamily true}, then the identifier of the species {\itshape always} stands for an amount wherever it appears in a mathematical formula or is referenced by an S\+B\+ML construct. In that case, there is never a question about whether an assignment or event is meant to affect the amount or concentration\+: it is always the amount.

A particularly confusing situation can occur when the species has \char`\"{}constant\char`\"{} attribute value of {\ttfamily true} in combination with a \char`\"{}has\+Only\+Substance\+Units\char`\"{} attribute value of {\ttfamily false}. Suppose this species is given a value for \char`\"{}initial\+Concentration\char`\"{}. Does a \char`\"{}constant\char`\"{} value of {\ttfamily true} mean that the concentration is held constant if the compartment size changes? No; it is still the amount that is kept constant across a compartment size change. The fact that the species was initialized using a concentration value is irrelevant. 

The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
\hyperlink{_species_8h}{Species.\+h}\end{DoxyCompactItemize}
